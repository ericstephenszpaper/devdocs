<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_275) on Mon Feb 01 17:28:16 EST 2021 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>KBAuthenticate (zPaper kb WebApp 3.32 API)</title>
<meta name="date" content="2021-02-01">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="KBAuthenticate (zPaper kb WebApp 3.32 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9,"i9":9,"i10":9,"i11":9,"i12":9,"i13":9,"i14":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KBAuthenticate.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/knowledgebin/kb/Item.html" title="class in com.knowledgebin.kb"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/knowledgebin/kb/KBConfig.html" title="class in com.knowledgebin.kb"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/knowledgebin/kb/KBAuthenticate.html" target="_top">Frames</a></li>
<li><a href="KBAuthenticate.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.knowledgebin.kb</div>
<h2 title="Class KBAuthenticate" class="title">Class KBAuthenticate</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.knowledgebin.kb.KBAuthenticate</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">KBAuthenticate</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#KBDATA_SESSION_NAME">KBDATA_SESSION_NAME</a></span></code>
<div class="block">*******************************************************************************************************************
 Moved here from KBAuthenticate.jspf and refactored
 *******************************************************************************************************************</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#logger">logger</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html?is-external=true" title="class or interface in java.util.regex">Pattern</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#sfServerPattern">sfServerPattern</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static <a href="https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html?is-external=true" title="class or interface in java.util.regex">Pattern</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#validators">validators</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#KBAuthenticate--">KBAuthenticate</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#authenticate-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-boolean-org.apache.log4j.Logger-">authenticate</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
            javax.servlet.http.HttpServletResponse&nbsp;response,
            boolean&nbsp;useCredentialsCookie,
            org.apache.log4j.Logger&nbsp;logger)</code>
<div class="block">This is the preferred authenticate method

 NOTES:
   It is up to the calling code to decide how to handle authentication status and manage Authentication Cookies.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#authenticate-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-java.lang.String-java.lang.String-boolean-org.apache.log4j.Logger-">authenticate</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
            javax.servlet.http.HttpServletResponse&nbsp;response,
            <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sfServer,
            <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sfSessionID,
            boolean&nbsp;useCredentialsCookie,
            org.apache.log4j.Logger&nbsp;logger)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#authenticate-javax.servlet.ServletContext-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-">authenticate</a></span>(javax.servlet.ServletContext&nbsp;servletContext,
            javax.servlet.http.HttpServletRequest&nbsp;request,
            javax.servlet.http.HttpServletResponse&nbsp;response)</code>
<div class="block">Authenticates the current request.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#authenticate-javax.servlet.ServletContext-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-java.lang.String-">authenticate</a></span>(javax.servlet.ServletContext&nbsp;servletContext,
            javax.servlet.http.HttpServletRequest&nbsp;request,
            javax.servlet.http.HttpServletResponse&nbsp;response,
            <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sqlClause)</code>
<div class="block">Modified authenticate in which the remoteUser is supplied with a SQL qualification string.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#authenticateAdminUser-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-org.apache.log4j.Logger-">authenticateAdminUser</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
                     javax.servlet.http.HttpServletResponse&nbsp;response,
                     org.apache.log4j.Logger&nbsp;logger)</code>
<div class="block">Authenticate a zPaper Administrator User.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#clearAuthenticateCookie-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-">clearAuthenticateCookie</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
                       javax.servlet.http.HttpServletResponse&nbsp;response)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#decryptCredentials-com.knowledgebin.kb.KBData-java.lang.String-">decryptCredentials</a></span>(<a href="../../../com/knowledgebin/kb/KBData.html" title="class in com.knowledgebin.kb">KBData</a>&nbsp;kbData,
                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;s)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#encryptCredentials-com.knowledgebin.kb.KBData-">encryptCredentials</a></span>(<a href="../../../com/knowledgebin/kb/KBData.html" title="class in com.knowledgebin.kb">KBData</a>&nbsp;kbData)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#getCookie-javax.servlet.http.HttpServletRequest-java.lang.String-">getCookie</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
         <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;cookieName)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#getKBCredentialsCookie-javax.servlet.http.HttpServletRequest-">getKBCredentialsCookie</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#populateFromSF-javax.servlet.http.HttpSession-com.knowledgebin.kb.KBData-java.lang.String-">populateFromSF</a></span>(javax.servlet.http.HttpSession&nbsp;session,
              <a href="../../../com/knowledgebin/kb/KBData.html" title="class in com.knowledgebin.kb">KBData</a>&nbsp;kbData,
              <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;userInfoXML)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#setAuthenticateCookie-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-com.knowledgebin.kb.KBConfig-com.knowledgebin.kb.KBData-">setAuthenticateCookie</a></span>(javax.servlet.http.HttpServletRequest&nbsp;request,
                     javax.servlet.http.HttpServletResponse&nbsp;response,
                     <a href="../../../com/knowledgebin/kb/KBConfig.html" title="class in com.knowledgebin.kb">KBConfig</a>&nbsp;kbConfig,
                     <a href="../../../com/knowledgebin/kb/KBData.html" title="class in com.knowledgebin.kb">KBData</a>&nbsp;kbData)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>(package private) static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#validate-java.lang.String-java.lang.String-">validate</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;value)</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#validateParameters-com.knowledgebin.kb.KBConfig-javax.servlet.http.HttpServletRequest-">validateParameters</a></span>(<a href="../../../com/knowledgebin/kb/KBConfig.html" title="class in com.knowledgebin.kb">KBConfig</a>&nbsp;kbConfig,
                  javax.servlet.http.HttpServletRequest&nbsp;request)</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/knowledgebin/kb/KBAuthenticate.html#validateParameters-com.knowledgebin.kb.KBConfig-javax.servlet.http.HttpServletRequest-java.lang.String-java.lang.String-">validateParameters</a></span>(<a href="../../../com/knowledgebin/kb/KBConfig.html" title="class in com.knowledgebin.kb">KBConfig</a>&nbsp;kbConfig,
                  javax.servlet.http.HttpServletRequest&nbsp;request,
                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;n0,
                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;v0)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="logger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logger</h4>
<pre>static&nbsp;org.apache.log4j.Logger logger</pre>
</li>
</ul>
<a name="validators">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validators</h4>
<pre>static&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html?is-external=true" title="class or interface in java.util.regex">Pattern</a>&gt; validators</pre>
</li>
</ul>
<a name="KBDATA_SESSION_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>KBDATA_SESSION_NAME</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> KBDATA_SESSION_NAME</pre>
<div class="block">*******************************************************************************************************************
 Moved here from KBAuthenticate.jspf and refactored
 *******************************************************************************************************************</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.knowledgebin.kb.KBAuthenticate.KBDATA_SESSION_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="sfServerPattern">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sfServerPattern</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html?is-external=true" title="class or interface in java.util.regex">Pattern</a> sfServerPattern</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="KBAuthenticate--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>KBAuthenticate</h4>
<pre>public&nbsp;KBAuthenticate()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="validate-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validate</h4>
<pre>static&nbsp;boolean&nbsp;validate(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
                        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;value)</pre>
</li>
</ul>
<a name="validateParameters-com.knowledgebin.kb.KBConfig-javax.servlet.http.HttpServletRequest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validateParameters</h4>
<pre>public static&nbsp;void&nbsp;validateParameters(<a href="../../../com/knowledgebin/kb/KBConfig.html" title="class in com.knowledgebin.kb">KBConfig</a>&nbsp;kbConfig,
                                      javax.servlet.http.HttpServletRequest&nbsp;request)
                               throws <a href="../../../com/zpaper/exception/InvalidParameterException.html" title="class in com.zpaper.exception">InvalidParameterException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/zpaper/exception/InvalidParameterException.html" title="class in com.zpaper.exception">InvalidParameterException</a></code></dd>
</dl>
</li>
</ul>
<a name="validateParameters-com.knowledgebin.kb.KBConfig-javax.servlet.http.HttpServletRequest-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validateParameters</h4>
<pre>public static&nbsp;void&nbsp;validateParameters(<a href="../../../com/knowledgebin/kb/KBConfig.html" title="class in com.knowledgebin.kb">KBConfig</a>&nbsp;kbConfig,
                                      javax.servlet.http.HttpServletRequest&nbsp;request,
                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;n0,
                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;v0)
                               throws <a href="../../../com/zpaper/exception/InvalidParameterException.html" title="class in com.zpaper.exception">InvalidParameterException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/zpaper/exception/InvalidParameterException.html" title="class in com.zpaper.exception">InvalidParameterException</a></code></dd>
</dl>
</li>
</ul>
<a name="authenticate-javax.servlet.ServletContext-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authenticate</h4>
<pre>public static&nbsp;boolean&nbsp;authenticate(javax.servlet.ServletContext&nbsp;servletContext,
                                   javax.servlet.http.HttpServletRequest&nbsp;request,
                                   javax.servlet.http.HttpServletResponse&nbsp;response)
                            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                   javax.servlet.ServletException</pre>
<div class="block">Authenticates the current request.  If the session exists and has already been authenticated then it returns
 true immediately.  Otherwise the authentication process begins.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>servletContext</code> - ServletContext</dd>
<dd><code>request</code> - HttpServletRequest</dd>
<dd><code>response</code> - HttpServletRepsonse @return true if the user has been authenticated.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if authenticated user</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code>javax.servlet.ServletException</code></dd>
</dl>
</li>
</ul>
<a name="authenticate-javax.servlet.ServletContext-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authenticate</h4>
<pre>public static&nbsp;boolean&nbsp;authenticate(javax.servlet.ServletContext&nbsp;servletContext,
                                   javax.servlet.http.HttpServletRequest&nbsp;request,
                                   javax.servlet.http.HttpServletResponse&nbsp;response,
                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sqlClause)
                            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                   javax.servlet.ServletException</pre>
<div class="block">Modified authenticate in which the remoteUser is supplied with a SQL qualification string.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>servletContext</code> - </dd>
<dd><code>request</code> - </dd>
<dd><code>response</code> - </dd>
<dd><code>sqlClause</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code>javax.servlet.ServletException</code></dd>
</dl>
</li>
</ul>
<a name="clearAuthenticateCookie-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearAuthenticateCookie</h4>
<pre>public static&nbsp;void&nbsp;clearAuthenticateCookie(javax.servlet.http.HttpServletRequest&nbsp;request,
                                           javax.servlet.http.HttpServletResponse&nbsp;response)</pre>
</li>
</ul>
<a name="setAuthenticateCookie-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-com.knowledgebin.kb.KBConfig-com.knowledgebin.kb.KBData-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAuthenticateCookie</h4>
<pre>public static&nbsp;void&nbsp;setAuthenticateCookie(javax.servlet.http.HttpServletRequest&nbsp;request,
                                         javax.servlet.http.HttpServletResponse&nbsp;response,
                                         <a href="../../../com/knowledgebin/kb/KBConfig.html" title="class in com.knowledgebin.kb">KBConfig</a>&nbsp;kbConfig,
                                         <a href="../../../com/knowledgebin/kb/KBData.html" title="class in com.knowledgebin.kb">KBData</a>&nbsp;kbData)</pre>
</li>
</ul>
<a name="getCookie-javax.servlet.http.HttpServletRequest-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCookie</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getCookie(javax.servlet.http.HttpServletRequest&nbsp;request,
                               <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;cookieName)</pre>
</li>
</ul>
<a name="getKBCredentialsCookie-javax.servlet.http.HttpServletRequest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKBCredentialsCookie</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getKBCredentialsCookie(javax.servlet.http.HttpServletRequest&nbsp;request)</pre>
</li>
</ul>
<a name="encryptCredentials-com.knowledgebin.kb.KBData-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encryptCredentials</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;encryptCredentials(<a href="../../../com/knowledgebin/kb/KBData.html" title="class in com.knowledgebin.kb">KBData</a>&nbsp;kbData)</pre>
</li>
</ul>
<a name="decryptCredentials-com.knowledgebin.kb.KBData-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decryptCredentials</h4>
<pre>public static&nbsp;void&nbsp;decryptCredentials(<a href="../../../com/knowledgebin/kb/KBData.html" title="class in com.knowledgebin.kb">KBData</a>&nbsp;kbData,
                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;s)</pre>
</li>
</ul>
<a name="authenticate-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-boolean-org.apache.log4j.Logger-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authenticate</h4>
<pre>public static&nbsp;boolean&nbsp;authenticate(javax.servlet.http.HttpServletRequest&nbsp;request,
                                   javax.servlet.http.HttpServletResponse&nbsp;response,
                                   boolean&nbsp;useCredentialsCookie,
                                   org.apache.log4j.Logger&nbsp;logger)
                            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                   javax.servlet.ServletException</pre>
<div class="block">This is the preferred authenticate method

 NOTES:
   It is up to the calling code to decide how to handle authentication status and manage Authentication Cookies.

   NOTE !!! This method does NOT do general parameter validation !!! NOR SHOULD IT !!!

   NOTE This method now performs throttle checks and throws a ServletException if the throttle rates have been exceeded

   NOTE If the Users.wddata.X_crmOrg field value is blank then salesforce.com will not be use for username/password authentication

   Requirements:
   . SF_find and SF_faxFrames are accessible from salesforce.com users and non-SF users.
   . authenticate needs to be optimized such that accesses to salesforce.com is minimized (i.e. if not in KBin DB then don't ask SF)
   . The exception to above rule is when specifically requested by SF_find to authenticate with SF to determine the
      eligibility for creating an account, and then the request MUST contain valid SFserver and SFsession values.
   . Eliminate the use of challenge cookies.
   . Force user authentication prompt for new sessions with user browsers.
   . Do not force user authentication when authorization is present for user-agent='KBinAgent'

   USAGE:
   <code>
    authenticate(request, response, false);

    KBData kbData = (KBData) request.getSession().getAttribute("kbData");
    KBData kbDataAPI = (KBData) request.getSession().getAttribute("kbDataApiUser");
    //if (request.getParameter("group") != null && kbDataAPI != null && kbData != null) kbData=kbDataAPI; //ERS121204 //CMA130710 replaced
    if (null != kbDataAPI && StringUtils.isNotBlank(request.getParameter("group"))) kbData=kbDataAPI; //CMA130710
    if (!kbData.authenticated) {
      String msg = "";
      if (kbData.deactivated) {
        msg = "User " + kbData.remoteUser + " has been deactivated.";
        logger.warn(request.getRemoteAddr() + " - " + msg);
      } else if (kbData.loginAttempts <= 3) {
        msg = "This request requires HTTP authentication.";
        // Prompt the user for a username password
        response.setHeader("WWW-Authenticate", HttpServletRequest.BASIC_AUTH + " realm=\"" + kbData.kbConfig.authenticationRealm + "\"");
      } else {
        msg = "The maximum login attempts has been exceeded.";
        logger.warn(request.getRemoteAddr() + " - " + msg);
        session.invalidate();
      }
      response.sendError(HttpServletResponse.SC_UNAUTHORIZED, msg);
      return;
    }
   </code>

   General Flow: (updated 07/17/2011)
   . gather all information (e.g. authorization header, credentials cookie(KBID), SFserver, SFsession, SFuser)
   . check application request throttle.
   . get the servlet session, creating one if necessary
   . verify webapp is initialized (e.g. KBConfig exists in the application context)
   . pull KBData instance from session, create one if necessary
   . Get the KBData for the user, creating one if required.
   . if session is already authenticated (i.e. kbData.authenticated == true)
   . perform some sanity checks to determine whether SFsesion of SFuser has changed.
   . if ok return true
   . session is not currently authenticated so proceed with authentication processing
   . check authentication request throttle.
   . clear authentication flags, remoteUser and password fields in the KBData structure.
   . if provided validate the SFserver and SFsession parameters
   . if not valid then clear the sfServer and sfSession variables
   . Determine which credentials source to use and populate the kbData.remoteUser and kbData.password
   . This is accomplished by accepting the first username found in the following order
   . If SFserver and SFsession are supplied and valid get the username from myfileforce/SF_UserInfo.jsp
   . If authorization header is provided then use it
   . If the credentials cookie is provided then use it.
   . If the SFuser parameter is provided then use it.
   . If we have a candidate (i.e. kbData.remoteUser != null)
   . attempt to find matching username in Users table
   . if not found
   . attempt to find DEACTivated username in Users table
   . if found mark user as deactivated
   . else username found
   . attempt to match password in database with provided password.
   . if match found send authenticated flag and return true

   . if no database password match found attempt to validate username/password with salesforce

   . This last step occurs because the request failed authentication
   . Clear the kbData structure, set the ChallengingCookie, clear the AuthenticateCookie and return false.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - </dd>
<dd><code>response</code> - </dd>
<dd><code>useCredentialsCookie</code> - </dd>
<dd><code>logger</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if authenticated</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code>javax.servlet.ServletException</code></dd>
</dl>
</li>
</ul>
<a name="authenticate-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-java.lang.String-java.lang.String-boolean-org.apache.log4j.Logger-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authenticate</h4>
<pre>public static&nbsp;boolean&nbsp;authenticate(javax.servlet.http.HttpServletRequest&nbsp;request,
                                   javax.servlet.http.HttpServletResponse&nbsp;response,
                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sfServer,
                                   <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;sfSessionID,
                                   boolean&nbsp;useCredentialsCookie,
                                   org.apache.log4j.Logger&nbsp;logger)
                            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                   javax.servlet.ServletException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code>javax.servlet.ServletException</code></dd>
</dl>
</li>
</ul>
<a name="authenticateAdminUser-javax.servlet.http.HttpServletRequest-javax.servlet.http.HttpServletResponse-org.apache.log4j.Logger-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>authenticateAdminUser</h4>
<pre>public static&nbsp;boolean&nbsp;authenticateAdminUser(javax.servlet.http.HttpServletRequest&nbsp;request,
                                            javax.servlet.http.HttpServletResponse&nbsp;response,
                                            org.apache.log4j.Logger&nbsp;logger)
                                     throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                            javax.servlet.ServletException</pre>
<div class="block">Authenticate a zPaper Administrator User.  This is intended to be use by administrator users.
 The users are authenticated against the zPaper salesforce.com organization.  The KBData object is built from
 the data returned from salesforce.com and does NO lookup in the zPaper database.
 The userID will be "10:<salesforce username>" and the groupID will be -10.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - </dd>
<dd><code>response</code> - </dd>
<dd><code>logger</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code>javax.servlet.ServletException</code></dd>
</dl>
</li>
</ul>
<a name="populateFromSF-javax.servlet.http.HttpSession-com.knowledgebin.kb.KBData-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>populateFromSF</h4>
<pre>public static&nbsp;void&nbsp;populateFromSF(javax.servlet.http.HttpSession&nbsp;session,
                                  <a href="../../../com/knowledgebin/kb/KBData.html" title="class in com.knowledgebin.kb">KBData</a>&nbsp;kbData,
                                  <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;userInfoXML)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/KBAuthenticate.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/knowledgebin/kb/Item.html" title="class in com.knowledgebin.kb"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/knowledgebin/kb/KBConfig.html" title="class in com.knowledgebin.kb"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/knowledgebin/kb/KBAuthenticate.html" target="_top">Frames</a></li>
<li><a href="KBAuthenticate.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2021 zPaper. All rights reserved.</small></p>
</body>
</html>
